{% extends 'main.html' %}
{% load static %}
{% load crispy_forms_filters %}
{% load crispy_forms_tags %}

{% block addcss %}
    <link href="{% static 'mycalendar/css/mycal.css' %}" rel="stylesheet" type="text/css"/>
{% endblock %}


{% block content %}
    <!--Head-->
    <header class="cal-header">
    </header>
    <!--Body-->
    <div class="container-fluid body-section">
        {% if event_list.count == 0 %}
            <div class="container col-6 card card-body bg-blue">
                <div class="align-items-center justify-content-center text-center">
                    <p>Vous n'avez aucune consultation de prévue pour l'instant</p>
                </div>
                <div>
                     <form class="mx-5 my-5 font-weight-bolder" method="post" enctype="multipart/form-data">{% csrf_token %}
                          {{ form | crispy }}
                        <button class="btn btn-primary" type="submit">Valider</button>
                      </form>
                </div>
            </div>
        {% else %}
            <div class="container align-self-start mb-2">
                <button class="btn btn-info" type="button" data-toggle="collapse" data-target="#form" aria-expanded="false" aria-controls="collapseExample">
                    Ajouter un rendez-vous
                </button>
                <div class="row">
                    <div class="collapse mt-3 col-lg-4" id="form">
                        <div class="card card-body">
                          <form class="mx-2 my-5 font-weight-bolder" method="post">{% csrf_token %}
                              {{form | crispy}}
                            <button class="btn btn-primary" type="submit">Valider</button>
                          </form>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="wrapper">
                    <table class="table item bg-blue">
                      <thead class="thead-dark">
                        <tr>
                            <th scope="col">Date</th>
                            <th scope="col">Pour</th>
                            <th scope="col">Motif</th>
                            <th scope="col">Commentaire</th>
                            <th scope="col"></th>
                        </tr>
                      </thead>
                      <tbody class="text-black">
                      {% for event in event_list %}
                        <tr>
                            <td class="td-sm">{{ event.date }}</td>
                            <td class="td-sm">{{ event.pet_name }}</td>
                            <td class="td-sm">{{ event.reason }}</td>
                            <td class="td-lg">{{ event.comment }}</td>
                            <td class="td-sm">
                            <button class=" btn btn-sm btn-light" onclick="return confirm('Êtes-vous sûr(e) ?');" >
                                <small><a href="{% url "delete_event" id_event=event.id %}">Supprimer</a></small>
                            </button>
                            </td>
                        </tr>
                      {% endfor %}
                      </tbody>
                    </table>
                </div>
            </div>
        {% endif %}
    </div>
{% endblock %}
